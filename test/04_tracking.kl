require Oculus;

operator entry() {
  ovrDevice device();

  device.configureTracking(ovrTrackingCap_Orientation |
    ovrTrackingCap_MagYawCorrection |
    ovrTrackingCap_Position, 0);

  while(true) {
  // for(Size i=0;i<10;i++) {
    ovrTrackingState ts = device.getTrackingState(device.getTimeInSeconds());
    while(!(ts.StatusFlags & (ovrStatus_OrientationTracked | ovrStatus_PositionTracked))) {
      ts = device.getTrackingState(device.getTimeInSeconds());
    }
    report(ts.HeadPose.ThePose.Position * 100.0);
  }

  report('received first tracking state.');
}
